package dbConnection;

import java.sql.*;
import java.util.*;

public class RegisterMgrPool {
	
	private DBConnectionMgr pool = null;
	
	public RegisterMgrPool() {
		try {
			pool = DBConnectionMgr.getInstance();
		}catch(Exception e) {
			System.out.println("컨넥션 얻오오기 실패");
		}
	}
	public Vector<RegisterBean> getRegisterList(){
		Connection conn = null;
		Statement stmt = null;
		ResultSet rs = null;
		Vector<RegisterBean> vlist = new Vector<RegisterBean>();
		try {
			conn = pool.getConnection();		//풀을 통해 Connection 을 얻는다.
			String strQuery = "select * from member1";
			stmt= conn.createStatement();
			rs =stmt.executeQuery(strQuery);
			while(rs.next()) {
				System.out.println("여기");
				RegisterBean regBean = new RegisterBean();
				regBean.setMem_id(rs.getString("mem_userid"));
				regBean.setMem_email(rs.getString("mem_zipcode"));
				regBean.setMem_pwd(rs.getString("mem_pwd"));
				vlist.add(regBean);
			}
		}catch(Exception e) {
			System.out.println("예외발생");
		}finally {
			pool.freeConnection(conn);
		}
		return vlist;
		
	}
	
}
